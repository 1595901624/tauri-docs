---
import { t, l } from 'astro-i18n'
import IconCaret from '~icons/bi/caret-down-fill'

type navbarItem = {
  title: string
  href?: string
  children?: navbarItem[]
}

const navbar: navbarItem[] = [
  {
    title: t('global.nav.docs'),
    href: l('/docs/core/1'),
  },
  {
    title: t('global.nav.references'),
    children: [
      {
        title: t('global.nav.javascript-api'),
        href: l('/api/core-js/1'),
      },
      {
        title: t('global.nav.rust-api'),
        href: l('/api/core-rust/1'),
      },
      {
        title: t('global.nav.tauri-config'),
        href: l('/api/core-config/1'),
      },
      {
        title: t('global.nav.tauri-cli'),
        href: l('/api/core-cli/1'),
      },
    ],
  },
  {
    title: t('global.nav.about'),
    href: l('/about'),
  },
]
---

{
  navbar.map((item) => (
    <li>
      {item.children && (
        <label tabindex="0">
          {item.title}
          {item.children && <IconCaret class="text-xs" />}
        </label>
      )}
      {!item.children && (
        <a href={item.href}>
          {item.title}
          {item.children && <IconCaret class="text-xs" />}
        </a>
      )}
      {item.children && (
        <ul>
          {item.children.map((child) => (
            <li>
              <a href={child.href}>{child.title}</a>
            </li>
          ))}
        </ul>
      )}
    </li>
  ))
}
